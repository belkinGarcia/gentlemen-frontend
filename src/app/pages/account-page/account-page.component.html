<!-- El ngSwitch decide qué layout HTML renderizar -->
<div [ngSwitch]="displayMode">

  <!-- ======================================================= -->
  <!-- ===== VISTA #1: MODO TABS (PARA EL MODAL DE RESERVA) ==== -->
  <!-- ======================================================= -->
  <ng-container *ngSwitchCase="'tabs'">
    <!-- Encabezado para seleccionar la vista -->
    <div class="form-toggle-header">
      <div class="toggle-option" [class.active]="activeView === 'register'" (click)="setActiveView('register')">
        Crea tu cuenta
      </div>
      <div class="toggle-option" [class.active]="activeView === 'login'" (click)="setActiveView('login')">
        Iniciar sesión
      </div>
    </div>

    <!-- Contenido de los formularios -->
    <div class="forms-content">
      <!-- Formulario de Registro (se muestra si la vista activa es 'register') -->
      <div *ngIf="activeView === 'register'">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmitRegister()">
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Nombres</mat-label>
              <input matInput formControlName="firstName">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Apellidos</mat-label>
              <input matInput formControlName="lastName">
            </mat-form-field>
          </div>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>DNI</mat-label>
              <input matInput formControlName="dni">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Email</mat-label>
              <input matInput formControlName="email">
            </mat-form-field>
          </div>
          <div class="form-row">
            <mat-form-field appearance="outline">
              <mat-label>Contraseña</mat-label>
              <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password">
              <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
                <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Confirmar Contraseña</mat-label>
              <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="confirmPassword">
            </mat-form-field>
          </div>
          <mat-checkbox formControlName="terms">
            He leído y Acepto los <a routerLink="/terminos-y-condiciones" target="_blank">términos y condiciones</a>
          </mat-checkbox>
          <button mat-flat-button color="primary" type="submit" [disabled]="registerForm.invalid">REGISTRARME Y CONTINUAR</button>
        </form>
      </div>

      <!-- Formulario de Login (se muestra si la vista activa es 'login') -->
      <div *ngIf="activeView === 'login'">
        <form [formGroup]="loginForm" (ngSubmit)="onSubmitLogin()">
          <mat-form-field appearance="outline">
            <mat-label>DNI o Email</mat-label>
            <input matInput formControlName="username">
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Contraseña</mat-label>
            <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password">
            <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
              <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
          </mat-form-field>
          <div class="login-actions">
            <a href="#">¿Olvidaste tu contraseña?</a>
            <button mat-flat-button color="primary" type="submit" [disabled]="loginForm.invalid">INICIAR SESIÓN</button>
          </div>
        </form>
      </div>
    </div>
  </ng-container>

  <!-- ======================================================= -->
  <!-- ==== VISTA #2: MODO GRID (PARA LA PÁGINA PRINCIPAL) ==== -->
  <!-- ======================================================= -->
  <ng-container *ngSwitchDefault>
    <div class="content-wrapper">
      <div class="forms-container">
        <div class="form-section">
          <h2>INICIAR SESIÓN</h2>
          <form [formGroup]="loginForm" (ngSubmit)="onSubmitLogin()">
            <mat-form-field appearance="outline">
              <mat-label>DNI o Email</mat-label>
              <input matInput formControlName="username">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Contraseña</mat-label>
              <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password">
              <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
                <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
            </mat-form-field>
            <mat-checkbox formControlName="rememberMe">Recordarme</mat-checkbox>
            <button mat-flat-button color="accent" type="submit" [disabled]="loginForm.invalid">INICIAR SESIÓN</button>
            <div class="extra-links">
              <a href="#">¿Olvidaste tu contraseña?</a>
            </div>
          </form>
        </div>
        <div class="form-section">
          <h2>REGISTRO</h2>
          <form [formGroup]="registerForm" (ngSubmit)="onSubmitRegister()">
            <div class="form-row">
              <mat-form-field appearance="outline">
                <mat-label>Nombres</mat-label>
                <input matInput formControlName="firstName">
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>Apellidos</mat-label>
                <input matInput formControlName="lastName">
              </mat-form-field>
            </div>
            <div class="form-row">
              <mat-form-field appearance="outline">
                <mat-label>DNI</mat-label>
                <input matInput formControlName="dni">
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>Email</mat-label>
                <input matInput formControlName="email">
              </mat-form-field>
            </div>
            <div class="form-row">
              <mat-form-field appearance="outline">
                <mat-label>Contraseña</mat-label>
                <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password">
                <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
                  <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>Confirmar Contraseña</mat-label>
                <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="confirmPassword">
                <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
                  <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
              </mat-form-field>
            </div>
            <mat-form-field appearance="outline">
              <mat-label>Celular</mat-label>
              <input matInput formControlName="phone">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Distrito</mat-label>
              <input matInput formControlName="district">
            </mat-form-field>
            <mat-checkbox formControlName="terms">
              He leído y Acepto los <a routerLink="/terminos-y-condiciones" target="_blank">términos y condiciones</a>
            </mat-checkbox>
            <button mat-stroked-button color="accent" type="submit" [disabled]="registerForm.invalid">REGISTRARME AHORA</button>
          </form>
        </div>
      </div>
    </div>
  </ng-container>
</div>
