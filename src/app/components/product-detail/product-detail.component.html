<div *ngIf="product">
  <div class="product-hero-banner">
    <div class="content-wrapper">
      <h1>{{ product.name }}</h1>
    </div>
  </div>
  <div class="detail-container">
    <div class="product-image">
      <img [src]="product.imageUrl" [alt]="product.name">
    </div>

    <div class="product-info">
      <p class="price">{{ product.price | currency:'S/ ' }}</p>

      <p class="stock-label" [ngClass]="{'out-of-stock': product.stock === 0}">
        <mat-icon>inventory_2</mat-icon>
        Stock disponible: <strong>{{ product.stock }}</strong> unidades
      </p>

      <div class="quantity-selector" *ngIf="product.stock > 0">
        <button mat-icon-button (click)="decreaseQuantity()" [disabled]="quantity <= 1">
          <mat-icon>remove</mat-icon>
        </button>

        <input type="number" [(ngModel)]="quantity" (change)="validateInput()" min="1" [max]="product.stock"
          class="quantity-input">

        <button mat-icon-button (click)="increaseQuantity()" [disabled]="quantity >= product.stock">
          <mat-icon>add</mat-icon>
        </button>
      </div>

      <button mat-flat-button color="accent" class="add-to-cart-btn" (click)="addToCart()"
        [disabled]="product.stock === 0">
        {{ product.stock > 0 ? 'AGREGAR AL CARRITO' : 'AGOTADO' }}
      </button>

      <div class="meta-info">
        <p><strong>Categoría:</strong> {{ product.categoria?.nombre || product.category }}</p>

        <p><strong>Marca:</strong> {{ product.marca?.nombre || product.brand }}</p>
      </div>
    </div>
  </div>
  <div class="description-container">
    <h3>DESCRIPCIÓN</h3>
    <p>{{ product.description }}</p>
  </div>
  <div class="related-products">
    <h2>PRODUCTOS RELACIONADOS</h2>
    <app-product-list [showFilterBar]="false" [isCarousel]="true" [products]="relatedProducts">
    </app-product-list>
  </div>
  <app-testimonials></app-testimonials>
</div>
<app-info-section></app-info-section>